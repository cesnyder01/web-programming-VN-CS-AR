<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet" href="src/style.css">
</head>
<body>
  <div class="dashboard wrapper">
    <!-- Header with user name + logout -->
    <div class="dashboard-header">
      <h1>Welcome, <span id="userName">User</span>!</h1>
      <button id="logoutBtn">Logout</button>
    </div>

    <!-- Committees Section -->
    <div class="box committees-section">
      <h2>Your Committees</h2>
      <p>View, manage, or create committees you are a part of.</p>
      <button type="button" class="create-btn">Create New Committee</button>
    </div>

    <!-- Activity Feed Section -->
    <div class="box activity-section">
      <h2>Recent Motions / Activity Feed</h2>
      <ul class="activity-list">
        <li><strong>Motion Passed:</strong> Update meeting rules for Budget Committee</li>
        <li><strong>New Member Added:</strong> Sarah W. to Policy Review Committee</li>
        <li><strong>Meeting Scheduled:</strong> Climate Action Committee - Thursday 3 PM</li>
      </ul>
    </div>
  </div>

  <!-- Scripts -->
  <script src="src/app.js"></script>
  <script>
    // Load user info from localStorage
    const data = JSON.parse(localStorage.getItem("appData"));
    const user = data?.auth?.currentUser;

    const userNameDisplay = document.getElementById("userName");
    const logoutBtn = document.getElementById("logoutBtn");

    if (!data?.auth?.isLoggedIn || !user) {
      // Not logged in â€” redirect to login
      window.location.href = "login.html";
    } else {
      // Show logged-in user's name
      userNameDisplay.textContent = user.name;
    }

    // Logout logic
    logoutBtn.addEventListener("click", () => {
      data.auth.isLoggedIn = false;
      data.auth.currentUser = null;
      localStorage.setItem("appData", JSON.stringify(data));
      window.location.href = "login.html";
    });
  </script>
</body>
</html>
